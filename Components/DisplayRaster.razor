@using Models;

<div class="raster-legend-pair">
    <div class="raster">
        @for (int i = 0; i < Raster.Col; i++)
        {
            <div class="raster-row">
                @for (int j = 0; j < Raster.Row; j++)
                {
                    double backgroundColorAlpha = (double)Raster.Grid[i, j].Color / Raster.MaxColor;
                    string textColorString = backgroundColorAlpha > 0.5 ? "white" : "black";
                    <div class="pixel" style="background-color:rgba(0,0,0,@backgroundColorAlpha);color:@textColorString">@Raster.Grid[i, j].Color</div>
                }
            </div>
        }
    </div>

    <div class="raster legend">
        <div>legenda</div>
        @foreach (int color in Raster.ColorPallete) {
            <div class="raster-row">
                <div class="pixel">@color</div>
                <div class="pixel" style="background-color:rgba(0,0,0,@((double)color / Raster.MaxColor));"></div>
            </div>
        }
    </div>
</div>

@code {
    [Parameter] public Raster Raster { get; set; }
}
